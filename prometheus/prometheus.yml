# Configuration globale
global:
  scrape_interval: 15s # Fréquence de collecte des métriques
  evaluation_interval: 15s # Fréquence d'évaluation des règles
  external_labels:
    monitor: 'cy-weather-monitor'

# Configuration des alertes (optionnel)
alerting:
  alertmanagers:
    - static_configs:
        - targets: []

# Fichiers de règles (optionnel)
rule_files:
  # - "alerts.yml"

# Configuration des cibles à surveiller
scrape_configs:
  # Surveillance de Prometheus lui-même
  - job_name: 'prometheus'
    static_configs:
      - targets: ['localhost:9090']

  # Surveillance de votre API FastAPI
  - job_name: 'cy-weather-api'
    scrape_interval: 10s
    static_configs:
      - targets: ['api:8000']
    metrics_path: '/metrics'  # Endpoint des métriques (à adapter)

  # Surveillance de Grafana
  - job_name: 'grafana'
    static_configs:
      - targets: ['grafana:3000']